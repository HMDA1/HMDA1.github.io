<!DOCTYPE html>

<html class="theme-next gemini use-motion" lang="zh-Hans">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"
  />
  <meta name="theme-color" content="#222">

  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">

  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />

  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"
  />

  <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"
                                                                                  rel="stylesheet" type="text/css">

  <link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet"
                                                                                  type="text/css" />

  <link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />

  <meta name="keywords" content="��GISer��" />

  <link rel="alternate" href="/atom.xml" title="new star" type="application/atom+xml"
  />

  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />

  <meta property="og:type" content="website">
  <meta property="og:title" content="new star">
  <meta property="og:url" content="http://yoursite.com/index.html">
  <meta property="og:site_name" content="new star">
  <meta property="og:locale" content="zh-Hans">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="new star">

  <script type="text/javascript" id="hexo.configurations">
    var NexT = window.NexT || {};
    var CONFIG = {
      root: '/',
      scheme: 'Gemini',
      version: '5.1.2',
      sidebar: {
        "position": "left",
        "display": "post",
        "offset": 12,
        "offset_float": 12,
        "b2t": false,
        "scrollpercent": false,
        "onmobile": false
      },
      fancybox: true,
      tabs: true,
      motion: true,
      duoshuo: {
        userId: '0',
        author: '博主'
      },
      algolia: {
        applicationID: '',
        apiKey: '',
        indexName: '',
        hits: {
          "per_page": 10
        },
        labels: {
          "input_placeholder": "Search for Posts",
          "hits_empty": "We didn't find any results for the search: ${query}",
          "hits_stats": "${hits} results found in ${time} ms"
        }
      }
    };

  </script>

  <link rel="canonical" href="http://yoursite.com/" />

  <title>new star</title>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner">
        <div class="site-brand-wrapper">
          <div class="site-meta ">

            <div class="custom-logo-site-title">
              <a href="/" class="brand" rel="start">
                <span class="logo-line-before">
                  <i></i>
                </span>
                <span class="site-title">new star</span>
                <span class="logo-line-after">
                  <i></i>
                </span>
              </a>
            </div>

            <p class="site-subtitle"></p>

          </div>

          <div class="site-nav-toggle">
            <button>
              <span class="btn-bar"></span>
              <span class="btn-bar"></span>
              <span class="btn-bar"></span>
            </button>
          </div>
        </div>

        <nav class="site-nav">

          <ul id="menu" class="menu">

            <li class="menu-item menu-item-home">
              <a href="/" rel="section">

                <i class="menu-item-icon fa fa-fw fa-home"></i>
                <br /> 首页
              </a>
            </li>

            <li class="menu-item menu-item-categories">
              <a href="/categories" rel="section">

                <i class="menu-item-icon fa fa-fw fa-th"></i>
                <br /> 分类
              </a>
            </li>

            <li class="menu-item menu-item-about">
              <a href="/about" rel="section">

                <i class="menu-item-icon fa fa-fw fa-user"></i>
                <br /> 关于
              </a>
            </li>

            <li class="menu-item menu-item-archives">
              <a href="/archives" rel="section">

                <i class="menu-item-icon fa fa-fw fa-archive"></i>
                <br /> 归档
              </a>
            </li>

            <li class="menu-item menu-item-tags">
              <a href="/tags" rel="section">

                <i class="menu-item-icon fa fa-fw fa-tags"></i>
                <br /> 标签
              </a>
            </li>

            <li class="menu-item menu-item-sitemap">
              <a href="/sitemap.xml" rel="section">

                <i class="menu-item-icon fa fa-fw fa-sitemap"></i>
                <br /> 站点地图
              </a>
            </li>

            <li class="menu-item menu-item-life">
              <a href="/life" rel="section">

                <i class="menu-item-icon fa fa-fw fa-heart"></i>
                <br /> 生活中的美好
              </a>
            </li>

            <li class="menu-item menu-item-photo">
              <a href="/photo" rel="section">

                <i class="menu-item-icon fa fa-fw fa-image"></i>
                <br /> photo
              </a>
            </li>

            <li class="menu-item menu-item-search">

              <a href="javascript:;" class="popup-trigger">

                <i class="menu-item-icon fa fa-search fa-fw"></i>
                <br /> 搜索
              </a>
            </li>

          </ul>

          <div class="site-search">

            <div class="popup search-popup local-search-popup">
              <div class="local-search-header clearfix">
                <span class="search-icon">
                  <i class="fa fa-search"></i>
                </span>
                <span class="popup-btn-close">
                  <i class="fa fa-times-circle"></i>
                </span>
                <div class="local-search-input-wrapper">
                  <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
                </div>
              </div>
              <div id="local-search-result"></div>
            </div>

          </div>

        </nav>

      </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">

            <section id="posts" class="posts-expand">

              <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

                <div class="post-block">
                  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/06/‘name’/">

                  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                    <meta itemprop="name" content="hao">
                    <meta itemprop="description" content="">
                    <meta itemprop="image" content="/images/avatar.gif">
                  </span>

                  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                    <meta itemprop="name" content="new star">
                  </span>

                  <header class="post-header">

                    <h1 class="post-title" itemprop="name headline">

                      <a class="post-title-link" href="/2017/09/06/‘name’/" itemprop="url">ArcGIS制作放射状流向地图（Radial Flow Map）</a>
                    </h1>

                    <div class="post-meta">
                      <span class="post-time">

                        <span class="post-meta-item-icon">
                          <i class="fa fa-calendar-o"></i>
                        </span>

                        <span class="post-meta-item-text">发表于</span>

                        <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-06T14:11:01+08:00">
                          2017-09-06
                        </time>

                      </span>

                      <span class="post-category">

                        <span class="post-meta-divider">|</span>

                        <span class="post-meta-item-icon">
                          <i class="fa fa-folder-o"></i>
                        </span>

                        <span class="post-meta-item-text">分类于</span>

                        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                          <a href="/categories/ArcGIS/" itemprop="url" rel="index">
                            <span itemprop="name">ArcGIS</span>
                          </a>
                        </span>

                      </span>

                      <div class="post-wordcount">

                        <span class="post-meta-item-icon">
                          <i class="fa fa-file-word-o"></i>
                        </span>

                        <span class="post-meta-item-text">字数统计&#58;</span>

                        <span title="字数统计">

                        </span>

                        <span class="post-meta-divider">|</span>

                        <span class="post-meta-item-icon">
                          <i class="fa fa-clock-o"></i>
                        </span>

                        <span class="post-meta-item-text">阅读时长 &asymp;</span>

                        <span title="阅读时长">

                        </span>

                      </div>

                    </div>
                  </header>

                  <div class="post-body" itemprop="articleBody">

                    <p>流向地图火了，因为Facebook的那张著名的友邻图，抑或因为《数据可视化之美》中介绍飞行模式的航线图，总之，流向地图以它特殊的可视化形式，直观地展示事物之间的联系，尤其在展示网络流向、贸易流向、迁徙路线等方面具有天然的优势。</p>
                    <p>Flow maps - show the movement of some phenomenon, normally goods
                      or people, from one place to another. Lines are used to symbolize
                      the flow, typically varied in width to represent differences
                      in the quantity of the flow.</p>
                    <p>　　上面这段话是Flow Map的定义（Buckley,2013,AAG），流向地图的特点就在于展示移动的地理现象，利用线的粗细或是颜色来展示更多的信息。当我们惊叹于那优美的线条以及绚丽的可视化效果时，不由得会想到，怎么才能做出这么一张流向地图呢？ArcGIS是否能够快速的实现呢？</p>
                    <pre><code>其实早在2011年，Esri的制图专家Mamata Akella就发表了一篇Blog，介绍在ArcGIS中实现一种流向地图的方法[1] ，来展示2011年Esri用户大会的参会者来源，如下图所示。
![1](/ArcGIS制作放射状流向地图/1.png)
</code></pre>
                    <p>这里我们也以一个实例来尝试如何快速生成该类型的地图，在这个例子里，我们把帝都北京和其他各国家的首都连接起来，通过结果可以看到帝都与各首都之间航线的轨迹和距离，这里我们主要是利用ArcGIS的一个工具——XY
                      to line。 </p>
                    <p>数据准备：XY to line工具所需要的输入是一个表格数据（.xls,.csv,.txt,.dbf均可以），必需的四个字段是每个点对的XY起止坐标，如下图所示，XCoor为各首都的X坐标，YCoord为各首都的Y坐标，BJX为北京的X坐标，BJY为北京的Y坐标，这里采用的是WGS
                      1984的坐标系统。
                      <br>
                      <img src="/ArcGIS制作放射状流向地图/2.png" alt="2">
                      <br>数据处理：打开XY to line工具，设置如上图，在Line Type中有四个选项，这里我们选择的是GEODISIC，ID字段设置为大洲，目的是为了保留该字段，以便将来按大洲进行符号化。</p>
                    <p>GEODESIC：测地线，椭球体表面上两点之间的最短连线</p>
                    <p>GREAT_CIRCLE: 大圆航线，通过两航路点间的大圆圈线(该两航路点与地心在同一平面)</p>
                    <p>RHUMB_LINE(loxodrome line): 等角航线：是地球表面上与经线相交成相同角度的曲线。在地球表面上除经线和纬线以外的等角航线，都是以极点为渐近点的螺旋曲线，在航海图（采用墨卡托投影）上又表现为直线</p>
                    <p>NORMAL_SECTION:法截弧，A点的法线与B点确定的法截面与椭球相交的弧线</p>
                    <p> 经过简单渲染，我们就得到了这样的地图：
                      <br>
                      <img src="/ArcGIS制作放射状流向地图/3.png" alt="3">
                      <br> 偶尔换个视角也不错，例如我们把Data Frame的坐标系统换一换，再按大洲做个符号化：
                      <br>
                      <img src="/ArcGIS制作放射状流向地图/4.png" alt="4">
                      <br>
                      <img src="/ArcGIS制作放射状流向地图/5.png" alt="5">
                      <br>
                      <img src="/ArcGIS制作放射状流向地图/6.png" alt="6">
                      <br>
                      <img src="/ArcGIS制作放射状流向地图/7.png" alt="7">
                    </p>
                    <p> 参考文档：</p>
                    <p>
                      <a href="http://blogs.esri.com/esri/arcgis/2011/09/06/creating-radial-flow-maps-with-arcgis/"
                                                                                                      target="_blank" rel="external">http://blogs.esri.com/esri/arcgis/2011/09/06/creating-radial-flow-maps-with-arcgis/</a>
                    </p>

                  </div>

                  <div>

                  </div>

                  <footer class="post-footer">

                    <div class="post-eof"></div>

                  </footer>
                </div>

              </article>

              <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

                <div class="post-block">
                  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/06/第一次测试/">

                  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                    <meta itemprop="name" content="hao">
                    <meta itemprop="description" content="">
                    <meta itemprop="image" content="/images/avatar.gif">
                  </span>

                  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                    <meta itemprop="name" content="new star">
                  </span>

                  <header class="post-header">

                    <h1 class="post-title" itemprop="name headline">

                      <a class="post-title-link" href="/2017/09/06/第一次测试/" itemprop="url">解决hexo博客的乱码问题</a>
                    </h1>

                    <div class="post-meta">
                      <span class="post-time">

                        <span class="post-meta-item-icon">
                          <i class="fa fa-calendar-o"></i>
                        </span>

                        <span class="post-meta-item-text">发表于</span>

                        <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-06T13:24:29+08:00">
                          2017-09-06
                        </time>

                      </span>

                      <span class="post-category">

                        <span class="post-meta-divider">|</span>

                        <span class="post-meta-item-icon">
                          <i class="fa fa-folder-o"></i>
                        </span>

                        <span class="post-meta-item-text">分类于</span>

                        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                          <a href="/categories/写作/" itemprop="url" rel="index">
                            <span itemprop="name">写作</span>
                          </a>
                        </span>

                      </span>

                      <div class="post-wordcount">

                        <span class="post-meta-item-icon">
                          <i class="fa fa-file-word-o"></i>
                        </span>

                        <span class="post-meta-item-text">字数统计&#58;</span>

                        <span title="字数统计">

                        </span>

                        <span class="post-meta-divider">|</span>

                        <span class="post-meta-item-icon">
                          <i class="fa fa-clock-o"></i>
                        </span>

                        <span class="post-meta-item-text">阅读时长 &asymp;</span>

                        <span title="阅读时长">

                        </span>

                      </div>

                    </div>
                  </header>

                  <div class="post-body" itemprop="articleBody">

                    <p>将博客文件保存为UTF-8即可解决问题。
                      <br>方法：
                      <br> 1.将博客文件保存为UTF-8
                      <br> 用记事本打开本地的博客文件“xxx.md”，然后点“另存为”，“编码(E):”选择“UTF-8”，
                      <br>点击“保存”，替换原文件。
                      <br> 2.重新生成，部署，博客乱码即消除。</p>
                    <p> hexo g
                      <br> hexo d</p>

                  </div>

                  <div>

                  </div>

                  <footer class="post-footer">

                    <div class="post-eof"></div>

                  </footer>
                </div>

              </article>

              <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

                <div class="post-block">
                  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/31/My-New-Post/">

                  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                    <meta itemprop="name" content="hao">
                    <meta itemprop="description" content="">
                    <meta itemprop="image" content="/images/avatar.gif">
                  </span>

                  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                    <meta itemprop="name" content="new star">
                  </span>

                  <header class="post-header">

                    <h1 class="post-title" itemprop="name headline">

                      <a class="post-title-link" href="/2017/08/31/My-New-Post/" itemprop="url">My New Post</a>
                    </h1>

                    <div class="post-meta">
                      <span class="post-time">

                        <span class="post-meta-item-icon">
                          <i class="fa fa-calendar-o"></i>
                        </span>

                        <span class="post-meta-item-text">发表于</span>

                        <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-31T17:55:51+08:00">
                          2017-08-31
                        </time>

                      </span>

                      <span class="post-category">

                        <span class="post-meta-divider">|</span>

                        <span class="post-meta-item-icon">
                          <i class="fa fa-folder-o"></i>
                        </span>

                        <span class="post-meta-item-text">分类于</span>

                        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                          <a href="/categories/writing/" itemprop="url" rel="index">
                            <span itemprop="name">writing</span>
                          </a>
                        </span>

                      </span>

                      <div class="post-wordcount">

                        <span class="post-meta-item-icon">
                          <i class="fa fa-file-word-o"></i>
                        </span>

                        <span class="post-meta-item-text">字数统计&#58;</span>

                        <span title="字数统计">

                        </span>

                        <span class="post-meta-divider">|</span>

                        <span class="post-meta-item-icon">
                          <i class="fa fa-clock-o"></i>
                        </span>

                        <span class="post-meta-item-text">阅读时长 &asymp;</span>

                        <span title="阅读时长">

                        </span>

                      </div>

                    </div>
                  </header>

                  <div class="post-body" itemprop="articleBody">

                    <p>Well, after a night of busyness, you go to bed at 12:00 p.m.Under
                      the big trend, the postgraduate entrance examination has become
                      popular.And the library has become the inevitable result.In
                      the process of taking up the seat, there will be a variety
                      of situations.For example, as far as I am concerned, 6 this
                      morning arrived early and found that the book was cleared,
                      which was very frustrating, so it was inevitable to look for
                      the next place.B. After finding other places, he cleared away
                      others’ books, which inevitably conflicts with others.When
                      two people don’t agree with each other, it is the escalation
                      of contradictions.It’s also because, many people, a lot of
                      seats are occupied, so the seat is strained.To sum up, taking
                      a seat is inevitable, but the study room is public and everyone
                      is entitled to it.At the same time, it is the library that
                      provides the resources to learn, so everyone wants a place.</p>

                  </div>

                  <div>

                  </div>

                  <footer class="post-footer">

                    <div class="post-eof"></div>

                  </footer>
                </div>

              </article>

              <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

                <div class="post-block">
                  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/23/hello-world/">

                  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                    <meta itemprop="name" content="hao">
                    <meta itemprop="description" content="">
                    <meta itemprop="image" content="/images/avatar.gif">
                  </span>

                  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                    <meta itemprop="name" content="new star">
                  </span>

                  <header class="post-header">

                    <h1 class="post-title" itemprop="name headline">

                      <a class="post-title-link" href="/2017/08/23/hello-world/" itemprop="url">hi</a>
                    </h1>

                    <div class="post-meta">
                      <span class="post-time">

                        <span class="post-meta-item-icon">
                          <i class="fa fa-calendar-o"></i>
                        </span>

                        <span class="post-meta-item-text">发表于</span>

                        <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-23T19:24:01+08:00">
                          2017-08-23
                        </time>

                      </span>

                      <div class="post-wordcount">

                        <span class="post-meta-item-icon">
                          <i class="fa fa-file-word-o"></i>
                        </span>

                        <span class="post-meta-item-text">字数统计&#58;</span>

                        <span title="字数统计">

                        </span>

                        <span class="post-meta-divider">|</span>

                        <span class="post-meta-item-icon">
                          <i class="fa fa-clock-o"></i>
                        </span>

                        <span class="post-meta-item-text">阅读时长 &asymp;</span>

                        <span title="阅读时长">

                        </span>

                      </div>

                    </div>
                  </header>

                  <div class="post-body" itemprop="articleBody">

                    <p>Welcome to
                      <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check
                      <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when
                      using Hexo, you can find the answer in
                      <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on
                      <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
                    <h2 id="Quick-Start">
                      <a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2>
                    <h3 id="Create-a-new-post">
                      <a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3>
                    <figure class="highlight bash">
                      <table>
                        <tr>
                          <td class="gutter">
                            <pre><div class="line">1</div></pre>
                          </td>
                          <td class="code">
                            <pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre>
                          </td>
                        </tr>
                      </table>
                    </figure>
                    <p>More info:
                      <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a>
                    </p>
                    <h3 id="Run-server">
                      <a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3>
                    <figure class="highlight bash">
                      <table>
                        <tr>
                          <td class="gutter">
                            <pre><div class="line">1</div></pre>
                          </td>
                          <td class="code">
                            <pre><div class="line">$ hexo server</div></pre>
                          </td>
                        </tr>
                      </table>
                    </figure>
                    <p>More info:
                      <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a>
                    </p>
                    <h3 id="Generate-static-files">
                      <a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3>
                    <figure class="highlight bash">
                      <table>
                        <tr>
                          <td class="gutter">
                            <pre><div class="line">1</div></pre>
                          </td>
                          <td class="code">
                            <pre><div class="line">$ hexo generate</div></pre>
                          </td>
                        </tr>
                      </table>
                    </figure>
                    <p>More info:
                      <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a>
                    </p>
                    <h3 id="Deploy-to-remote-sites">
                      <a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3>
                    <figure class="highlight bash">
                      <table>
                        <tr>
                          <td class="gutter">
                            <pre><div class="line">1</div></pre>
                          </td>
                          <td class="code">
                            <pre><div class="line">$ hexo deploy</div></pre>
                          </td>
                        </tr>
                      </table>
                    </figure>
                    <p>More info:
                      <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a>
                    </p>

                  </div>

                  <div>

                  </div>

                  <footer class="post-footer">

                    <div class="post-eof"></div>

                  </footer>
                </div>

              </article>

            </section>

          </div>

        </div>

        <div class="sidebar-toggle">
          <div class="sidebar-toggle-line-wrap">
            <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
            <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
            <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
          </div>
        </div>

        <aside id="sidebar" class="sidebar">

          <div class="sidebar-inner">

            <section class="site-overview sidebar-panel sidebar-panel-active">
              <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="hao"
                />
                <p class="site-author-name" itemprop="name">hao</p>

                <p class="site-description motion-element" itemprop="description"></p>

              </div>
              <nav class="site-state motion-element">

                <div class="site-state-item site-state-posts">

                  <a href="/archives">

                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>

                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>

                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>

              </nav>

              <div class="feed-link motion-element">
                <a href="/atom.xml" rel="alternate">
                  <i class="fa fa-rss"></i>
                  RSS
                </a>
              </div>

              <div class="links-of-author motion-element">

              </div>

            </section>

          </div>
        </aside>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async="" src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <div class="copyright">

          &copy;
          <span itemprop="copyrightYear">2017</span>
          <span class="with-love">
            <i class="fa fa-heart"></i>
          </span>
          <span class="author" itemprop="copyrightHolder">hao</span>

          <span class="post-meta-divider">|</span>
          <span class="post-meta-item-icon">
            <i class="fa fa-area-chart"></i>
          </span>

          <span class="post-meta-item-text">Site words total count&#58;</span>

          <span title="Site words total count">

          </span>

        </div>

        <div class="powered-by">
          <i class="fa fa-user-md"></i>
          <span id="busuanzi_container_site_uv">
            本站访客数:
            <span id="busuanzi_value_site_uv"></span>
          </span>
        </div>

        <div class="powered-by">由
          <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

        <span class="post-meta-divider">|</span>

        <div class="theme-info">主题 &mdash;
          <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.2</div>

        <div class="theme-info">
          <div class="powered-by"></div>
          <span class="post-count">博客全站共字</span>
        </div>

      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>

    </div>

  </div>

  <script type="text/javascript">
    if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
      window.Promise = null;
    }

  </script>

  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>

  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
  <script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;
    var onPopupClose = function(e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append(
          '<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css(
        'text-align', 'center');
      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content", this).text(),
              url: $("url", this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(
                  /<[^>]+>/g, "");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if (title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text,
                      caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0,
                        position = [],
                        index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word,
                          startPosition)) > -1) {
                        index.push({
                          position: position,
                          word: word
                        });
                        startPosition = position + wordLen;
                      }
                      return index;
                    }
                    indexOfTitle = indexOfTitle.concat(
                      getIndexByWord(keyword,
                        titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(
                      getIndexByWord(keyword,
                        contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length >
                    0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length +
                      indexOfContent.length;
                  }
                }
                // show search results
                if (isMatch) {
                  // sort index by position of keyword
                  [indexOfTitle, indexOfContent].forEach(function(
                    index) {
                    index.sort(function(itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft
                        .position) {
                        return itemRight.position -
                          itemLeft.position;
                      } else {
                        return itemLeft.word.length -
                          itemRight.word.length;
                      }
                    });
                  });
                  // merge hits into slices
                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index
                      .length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({
                        position: position,
                        length: word.length
                      });
                      var wordEnd = position + word.length;
                      // move to next position of hit
                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }
                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0,
                      title.length, indexOfTitle));
                  }
                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length -
                      1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if (start < 0) {
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if (end > content.length) {
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content,
                      start, end, indexOfContent));
                  }
                  // sort slices in content by search text's count and hits' count
                  slicesOfContent.sort(function(sliceLeft,
                    sliceRight) {
                    if (sliceLeft.searchTextCount !==
                      sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount -
                        sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !==
                      sliceRight.hits.length) {
                      return sliceRight.hits.length -
                        sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });
                  // select top N slices in content
                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0,
                      upperBound);
                  }
                  // highlight title and content
                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function(hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' +
                        text.substring(hit.position, end) +
                        '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }
                  var resultItem = '';
                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl +
                      "' class='search-result-title'>" +
                      highlightKeyword(title, slicesOfTitle[0]) +
                      "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl +
                      "' class='search-result-title'>" + title +
                      "</a>";
                  }
                  slicesOfContent.forEach(function(slice) {
                    resultItem += "<a href='" + articleUrl +
                      "'>" +
                      "<p class=\"search-result\">" +
                      highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });
                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML =
                '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML =
                '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function(resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft
                    .searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList =
                '<ul class=\"search-result-list\">';
              resultItems.forEach(function(result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }
          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function(event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }
          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');
          proceedsearch();
        }
      });
    }
    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });
    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e) {
      e.stopPropagation();
    });
    $(document).on('keyup', function(event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });

  </script>

</body>

</html>
<!-- ҳ������С���� -->
<script type="text/javascript" src="/js/src/love.js"></script>
